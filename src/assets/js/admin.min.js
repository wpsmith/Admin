(function($,window){window["wps"]={settingsChanged:false,categoryChecklistToggleInit:function(){"use strict";$('<p><span id="wps-category-checklist-toggle" class="button">'+wpsL10n.categoryChecklistToggle+"</span></p>").insertBefore("ul.categorychecklist");$(document).on("click.wps.wps_category_checklist_toggle","#wps-category-checklist-toggle",wps.categoryChecklistToggle)},categoryChecklistToggle:function(event){"use strict";var $this=$(event.target),checkboxes=$this.parent().next().find(":checkbox");if($this.data("clicked")){checkboxes.removeAttr("checked");$this.data("clicked",false)}else{checkboxes.attr("checked","checked");$this.data("clicked",true)}},toggleSettingsInit:function(){"use strict";$.each(wps_toggles,function(k,v){var data={selector:v[0],showSelector:v[1],checkValue:v[2]};$("div.wps-metaboxes").on("change.wps.wps_toggle",v[0],data,wps.toggleSettings);$(v[0]).trigger("change.wps_toggle",data)})},toggleSettings:function(event){"use strict";var $selector=$(event.data.selector),$showSelector=$(event.data.showSelector),checkValue=event.data.checkValue;if($.isArray(checkValue)&&$.inArray($selector.val(),checkValue)>-1||"_unchecked"===checkValue&&$selector.is(":not(:checked)")||"_checked"===checkValue&&$selector.is(":checked")||"_unchecked"!==checkValue&&"_checked"!==checkValue&&$selector.val()===checkValue){$($showSelector).slideDown("fast")}else{$($showSelector).slideUp("fast")}},updateCharacterCount:function(event){"use strict";$("#"+event.target.id+"_chars").html($(event.target).val().length.toString())},layoutHighlighter:function(event){"use strict";var selectedClass="selected";$('input[name="'+$(event.target).attr("name")+'"]').parent("label").removeClass(selectedClass);$(event.currentTarget).addClass(selectedClass)},confirm:function(text){"use strict";return confirm(text)},attachUnsavedChangesListener:function(){"use strict";$("div.wps-metaboxes :input").change(function(){wps.registerChange()});window.onbeforeunload=function(){if(wps.settingsChanged){return wpsL10n.saveAlert}};$('div.wps-metaboxes input[type="submit"]').click(function(){window.onbeforeunload=null})},registerChange:function(){"use strict";wps.settingsChanged=true},confirmUpgrade:function(){"use strict";return confirm(wpsL10n.confirmUpgrade)},confirmReset:function(){"use strict";return confirm(wpsL10n.confirmReset)},ready:function(){"use strict";wps.categoryChecklistToggleInit();wps.toggleSettingsInit();wps.attachUnsavedChangesListener();$("#wps_title, #wps_description").on("keyup.wps.wps_character_count",wps.updateCharacterCount);$(".wps-layout-selector").on("change.wps.wps_layout_selector","label",wps.layoutHighlighter);$(".wps-js-confirm-upgrade").on("click.wps.wps_confirm_upgrade",wps.confirmUpgrade);$(".wps-js-confirm-reset").on("click.wps.wps_confirm_reset",wps.confirmReset)}};$(wps.ready)})(jQuery,window);function wps_confirm(text){"use strict";return wps.confirm(text)}